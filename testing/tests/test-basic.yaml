
test-create-user:
  steps:
    - id: create-user
      path: /api/user/create
      method: POST
      data:
        username: $vars.sample-user
        password: $vars.sample-password
      assert:
        status-code: 200
        response:
          token: str

    - id: check-token
      path: /api/token/check
      method: POST
      headers:
        API-Token: $create-user.response.token
      assert:
        status-code: 200

    - id: check-bad-token
      path: /api/token/check
      method: POST
      headers:
        API-TOKEN: asdf23
      assert:
        status-code: 403



